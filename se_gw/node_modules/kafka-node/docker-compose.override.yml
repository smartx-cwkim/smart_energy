# kafka:
#   image: hyperlink/kafka:v9UniqueIP
#   links:
#     - zookeeper:zk
#   environment:
#     KAFKA_ADVERTISED_PORT: "9092"
#   volumes:
#     - /var/run/docker.sock:/var/run/docker.sock
#   privileged: true
nodejs:
  image: hyperlink/node:slim
  # image: hyperlink/node:0.10.41
  # image: hyperlink/node:4.2.3
  privileged: true
  # net: "host"
  links:
    - zookeeper:zk
  environment:
    DEBUG: "kafka-node:*"
    # NODE_DEBUG: "net"
    ZOOKEEPER_HOST: "zk"
    # ZOOKEEPER_HOST: "192.168.99.100"
  volumes:
    - ./kafka_producer_test.js:/kafka-node/kafka_producer_test.js
    - ./kafka_consumer_test.js:/kafka-node/kafka_consumer_test.js
  #   - ./socket_test.js:/kafka-node/socket_test.js
    - ./lib:/kafka-node/lib
  command: bash -c "node ./kafka_producer_test.js"